<section id="add-book">
    <form id="add-book-form" [formGroup]="addBookForm" (ngSubmit)="onSubmitForm()">
        <!-- value : {{addBookForm.value | json }} -->
        <div>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label> Title </mat-label>
                <input class="temp" matInput formControlName="title">
            </mat-form-field>
        </div>

        <div>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label> Description </mat-label>
                <textarea matInput formControlName="description" cols="35" rows="5"></textarea>
            </mat-form-field>
        </div>

        <ng-container formArrayName="authors">
            <h3>authors</h3>
            <div *ngFor="let author of authors.controls; let i=index" class="author-wrapper">
                <mat-form-field class="full-width" appearance="outline">
                    <input type="text" matInput [formControlName]="i">
                </mat-form-field>
                <button mat-raised-button color="warn" (click)="deleteAuthor(i)">Delete</button>
            </div>
            <button data-test-id="add-author-btn" type="button" mat-raised-button color="primary"
                (click)="addAuthor()">Add</button>
        </ng-container>

        <ng-container formGroupName="imageLinks">
            <h3>Image Links</h3>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label appearance="outline"> Small Thumbnail</mat-label>
                <input matInput formControlName="smallThumbnail">
                <mat-error *ngIf="!smallThumbnail?.valid && smallThumbnail?.touched">Small Thumbnal should be valid
                    url</mat-error>
            </mat-form-field>
            <br>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label> Thumbnail</mat-label>
                <input matInput formControlName="thumbnail">

                <mat-error *ngIf="!thumbnail?.valid && thumbnail?.touched"> Thumbnal should be valid
                    url</mat-error>
            </mat-form-field>
        </ng-container>

        <br>

        <div class="form-action-btn">
            ` <button class="submit-btn" mat-raised-button [disabled]="addBookForm.invalid" color="primary"
                type="submit">Save</button>
            <button mat-raised-button color="warn" (click)="resetForm()">Clear</button>
        </div>
    </form>

    <ng-container *ngIf="(formState$ | async) as formState">
        <div class="message-box success" *ngIf="formState.formSubmitionSuccess">Book Add Successfully! 
            <a [routerLink]="['/home']" (click)="gotoBookListAfterSuccess()">Goto Book List</a> </div>
        <div class="message-box error" *ngIf="formState.error">Cannot Add Book. Please Try again</div>
    </ng-container>


</section>